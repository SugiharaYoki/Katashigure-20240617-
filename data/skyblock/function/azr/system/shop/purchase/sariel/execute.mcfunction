

tag @s add AzrSariel_upg_SUCCESS

#surrounding_completed
execute if entity @s[scores={Azr_Shop=8432101}] if entity @s[tag=!AzrSariel_upg2,tag=!AzrSariel_upg1B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432102}] if entity @s[tag=!AzrSariel_upg1,tag=!AzrSariel_upg3,tag=!AzrSariel_upg2B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432103}] if entity @s[tag=!AzrSariel_upg2,tag=!AzrSariel_upg4,tag=!AzrSariel_upg3B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432104}] if entity @s[tag=!AzrSariel_upg3,tag=!AzrSariel_upg5,tag=!AzrSariel_upg4B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432105}] if entity @s[tag=!AzrSariel_upg4,tag=!AzrSariel_upg6,tag=!AzrSariel_upg5B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432106}] if entity @s[tag=!AzrSariel_upg5,tag=!AzrSariel_upg7,tag=!AzrSariel_upg6B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432108}] if entity @s[tag=!AzrSariel_upg7,tag=!AzrSariel_upg9,tag=!AzrSariel_upg8B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432109}] if entity @s[tag=!AzrSariel_upg8,tag=!AzrSariel_upg10,tag=!AzrSariel_upg9B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432110}] if entity @s[tag=!AzrSariel_upg9,tag=!AzrSariel_upg11,tag=!AzrSariel_upg10B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432111}] if entity @s[tag=!AzrSariel_upg10,tag=!AzrSariel_upg12,tag=!AzrSariel_upg11B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432112}] if entity @s[tag=!AzrSariel_upg11,tag=!AzrSariel_upg13,tag=!AzrSariel_upg12B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432113}] if entity @s[tag=!AzrSariel_upg12,tag=!AzrSariel_upg13B] run tag @s add AzrSariel_upg_FAILED_NC


execute if entity @s[scores={Azr_Shop=8432101}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432102}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432103}] unless entity @s[scores={Azr_emerald=10..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432104}] unless entity @s[scores={Azr_emerald=10..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432105}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432106}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432107}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432108}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432109}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432110}] unless entity @s[scores={Azr_emerald=10..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432111}] unless entity @s[scores={Azr_emerald=10..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432112}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432113}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED

#5BCD#surrounding_completed
execute if entity @s[scores={Azr_Shop=8432114}] if entity @s[tag=!AzrSariel_upg5,tag=!AzrSariel_upg5C,tag=!AzrSariel_upg4B,tag=!AzrSariel_upg6B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432115}] if entity @s[tag=!AzrSariel_upg5B,tag=!AzrSariel_upg5D,tag=!AzrSariel_upg4C,tag=!AzrSariel_upg6C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432116}] if entity @s[tag=!AzrSariel_upg5C,tag=!AzrSariel_upg5E,tag=!AzrSariel_upg4D,tag=!AzrSariel_upg6D] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432114}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432115}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432116}] unless entity @s[scores={Azr_emerald=40..}] run tag @s add AzrSariel_upg_FAILED
#9BCD#surrounding_completed
execute if entity @s[scores={Azr_Shop=8432117}] if entity @s[tag=!AzrSariel_upg9,tag=!AzrSariel_upg9C,tag=!AzrSariel_upg8B,tag=!AzrSariel_upg10B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432118}] if entity @s[tag=!AzrSariel_upg9B,tag=!AzrSariel_upg9D,tag=!AzrSariel_upg8C,tag=!AzrSariel_upg10C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432119}] if entity @s[tag=!AzrSariel_upg9C,tag=!AzrSariel_upg9E,tag=!AzrSariel_upg8D,tag=!AzrSariel_upg10D] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432117}] unless entity @s[scores={Azr_emerald=5..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432118}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432119}] unless entity @s[scores={Azr_emerald=40..}] run tag @s add AzrSariel_upg_FAILED

#6C
execute if entity @s[scores={Azr_Shop=8432120}] if entity @s[tag=!AzrSariel_upg5C,tag=!AzrSariel_upg7C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432120}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
#7B
execute if entity @s[scores={Azr_Shop=8432121}] if entity @s[tag=!AzrSariel_upg7] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432121}] unless entity @s[scores={Azr_emerald=30..}] run tag @s add AzrSariel_upg_FAILED
#8C
execute if entity @s[scores={Azr_Shop=8432125}] if entity @s[tag=!AzrSariel_upg7C,tag=!AzrSariel_upg9C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432125}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
#7C
execute if entity @s[scores={Azr_Shop=8432126}] if entity @s[tag=!AzrSariel_upg7B,tag=!AzrSariel_upg6C,tag=!AzrSariel_upg8C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432126}] unless entity @s[scores={Azr_emerald=40..}] run tag @s add AzrSariel_upg_FAILED

#3B3C3D#surrounding_completed
execute if entity @s[scores={Azr_Shop=8432122}] if entity @s[tag=!AzrSariel_upg3,tag=!AzrSariel_upg3C,tag=!AzrSariel_upg2B,tag=!AzrSariel_upg4B] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432123}] if entity @s[tag=!AzrSariel_upg3B,tag=!AzrSariel_upg3D,tag=!AzrSariel_upg2C,tag=!AzrSariel_upg4C] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432124}] if entity @s[tag=!AzrSariel_upg3C,tag=!AzrSariel_upg3E,tag=!AzrSariel_upg2D,tag=!AzrSariel_upg4D] run tag @s add AzrSariel_upg_FAILED_NC
execute if entity @s[scores={Azr_Shop=8432122}] unless entity @s[scores={Azr_emerald=10..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432123}] unless entity @s[scores={Azr_emerald=20..}] run tag @s add AzrSariel_upg_FAILED
execute if entity @s[scores={Azr_Shop=8432124}] unless entity @s[scores={Azr_emerald=40..}] run tag @s add AzrSariel_upg_FAILED


tag @s[tag=AzrSariel_upg_FAILED] remove AzrSariel_upg_SUCCESS
tag @s[tag=AzrSariel_upg_FAILED_NC] remove AzrSariel_upg_SUCCESS
tag @s[tag=AzrSariel_upg_FAILED_NC_armor1] remove AzrSariel_upg_SUCCESS
tag @s[tag=AzrSariel_upg_FAILED_NC_armor2] remove AzrSariel_upg_SUCCESS
tag @s[tag=AzrSariel_upg_FAILED_NC_armor3] remove AzrSariel_upg_SUCCESS
tag @s[tag=AzrSariel_upg_FAILED_NC_armor4] remove AzrSariel_upg_SUCCESS

execute if entity @s[tag=AzrSariel_upg_SUCCESS] run function skyblock:azr/system/shop/purchase/sariel/execute_sub


tellraw @s[tag=AzrSariel_upg_FAILED] [{"text":"失败：剩余素材不足！","color":"red"}]
tellraw @s[tag=AzrSariel_upg_FAILED_NC] [{"text":"失败：相邻升级格未解锁！","color":"red"}]
tag @s remove AzrSariel_upg_FAILED
tag @s remove AzrSariel_upg_FAILED_NC
playsound minecraft:ui.button.click master @s ~ ~ ~ 0.3 1.5 0.4
execute if entity @s[scores={Azr_Shop=8432101..8432199}] run function skyblock:azr/system/shop/purchase/sariel/page