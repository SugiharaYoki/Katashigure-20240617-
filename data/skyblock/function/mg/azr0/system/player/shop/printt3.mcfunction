

item replace entity @s[scores={Azr0_UPG_bread_storage=0,Azr0_UPG_hp=2..}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：50绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=1}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：150绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=2}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：250绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=3}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：350绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=4}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：450绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=5}] inventory.8 with rabbit_stew[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量","italic":false,"color":"green"}',lore=['{"text":"最高食物储备数量+1","color":"white","italic":true}','{"text":"消耗：600绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_storage=6}] inventory.8 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 储量 已升至最高级","italic":false,"color":"gold"}']

item replace entity @s[scores={Azr0_UPG_bread_recharge=0,Azr0_UPG_hp=2..}] inventory.17 with pumpkin_pie[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 恢复速度","italic":false,"color":"green"}',lore=['{"text":"食物储备恢复速度+100%","color":"white","italic":true}','{"text":"消耗：80绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_recharge=1}] inventory.17 with pumpkin_pie[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 恢复速度","italic":false,"color":"green"}',lore=['{"text":"食物储备恢复速度+100%","color":"white","italic":true}','{"text":"消耗：300绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_recharge=2}] inventory.17 with pumpkin_pie[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 恢复速度","italic":false,"color":"green"}',lore=['{"text":"食物储备恢复速度+100%","color":"white","italic":true}','{"text":"消耗：800绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_recharge=3}] inventory.17 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 恢复速度 已升至最高级","italic":false,"color":"gold"}']

item replace entity @s[scores={Azr0_UPG_bread_quality=0,Azr0_UPG_hp=4..}] inventory.26 with beef[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 质量","italic":false,"color":"green"}',lore=['{"text":"食物质量增加1阶","color":"white","italic":true}','{"text":"消耗：3钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_quality=1}] inventory.26 with beef[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 质量","italic":false,"color":"green"}',lore=['{"text":"食物质量增加1阶","color":"white","italic":true}','{"text":"消耗：10钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_quality=2}] inventory.26 with beef[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 质量","italic":false,"color":"green"}',lore=['{"text":"食物质量增加1阶","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_quality=3}] inventory.26 with beef[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 质量","italic":false,"color":"green"}',lore=['{"text":"食物质量增加1阶","color":"white","italic":true}','{"text":"消耗：40钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_bread_quality=4}] inventory.26 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"升级：食物 质量 已升至最高级","italic":false,"color":"gold"}']


item replace entity @s[scores={Azr0_UPG_hp=0}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：10绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=1}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=2}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：50绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=3}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：50绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=4}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：100绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=5}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：300绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=6}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：300绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=7}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：5钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=8}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：5钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=9}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：10钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=10}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：10钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=11}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：10钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=12}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=13}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=14}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=15}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=16}] inventory.7 with golden_apple[custom_data={"azr0shop":true},custom_name='{"text":"提升血量上限","italic":false,"color":"green"}',lore=['{"text":"增加2最高生命值","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_hp=17}] inventory.7 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"血量上限 已升至最高级","italic":false,"color":"gold"}']

execute store result score @s rng1 run scoreboard players get @s Azr0_MAX_star
execute store result score @s rng1 run scoreboard players operation @s rng1 -= @s Azr0_UPG_star
execute if score @s rng1 matches ..0 run item replace entity @s inventory.16 with torchflower_seeds[custom_data={"azr0shop":true},custom_name='{"text":"命星购买数量已达到当前上限","italic":false,"color":"red"}',lore=['{"text":"达成特殊条件以解锁上限","color":"white","italic":true}'],enchantments={vanishing_curse:1b}]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=0}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：50绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=1}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：200绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=2}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：500绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=3}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：1000绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=4}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：1000绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=5}] inventory.16 with torchflower[custom_data={"azr0shop":true},custom_name='{"text":"购买命星×1","italic":false,"color":"green"}',lore=['{"text":"命星可以用于复活 死亡时自动消耗1颗命星","color":"white","italic":true}','{"text":"消耗：1000绿宝石","color":"red","italic":true}']]
execute if score @s rng1 matches 1.. run item replace entity @s[scores={Azr0_UPG_star=6}] inventory.16 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"已购买全部命星！","italic":false,"color":"gold"}']

execute unless items entity @s player.crafting.1 *[!custom_data~{PsychicVitae:1b}] if entity @s[tag=hasSkills] run item replace entity @s player.crafting.1 with minecraft:enchanted_book[custom_name='{"bold":true,"italic":false,"color":"gold","text":"灵能手册"}',lore=['{"italic":false,"text":"在物品栏选定以展开索命连击升级页面"}'],custom_data={PsychicVitae:1b},custom_model_data=100001]


item replace entity @s[scores={Azr0_UPG_armor=0,Azr0_UPG_hp=..2}] inventory.25 with barrier
item replace entity @s[scores={Azr0_UPG_armor=0,Azr0_UPG_hp=3..}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：10绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=1}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：30绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=2}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：70绿宝石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=3}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：3钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=4}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：8钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=5}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=6}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=7}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=8}] inventory.25 with chainmail_chestplate[custom_data={"azr0shop":true},custom_name='{"text":"提升护甲","italic":false,"color":"green"}',lore=['{"text":"增加2护甲","color":"white","italic":true}','{"text":"消耗：20钻石","color":"red","italic":true}']]
item replace entity @s[scores={Azr0_UPG_armor=9}] inventory.25 with end_crystal[custom_data={"azr0shop":true},custom_name='{"text":"护甲 已升至最高级","italic":false,"color":"gold"}']


execute if entity @s[scores={Azr0_SkillPoint=1..,Azr0_SkillEquip_1rng=0}] run function skyblock:mg/azr0/system/player/skill/refresh_skill
execute if entity @s[tag=MGAZR0_SkillPrintable] run function skyblock:mg/azr0/system/player/shop/skill_print
